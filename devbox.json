{
  "$schema": "https://raw.githubusercontent.com/jetify-com/devbox/0.16.0/.schema/devbox.schema.json",
  "packages": [
    "python311@latest",
    "python311Packages.watchdog@latest"
  ],
  "shell": {
    "init_hook": [
      "echo 'Welcome to devbox!' > /dev/null",
      "# --- 1. Ensure Venv Exists (Compatible with install.sh) ---",
      "if [ ! -d .venv ]; then",
      "  echo '[devbox] Creating .venv...'",
      "  python -m venv .venv",
      "fi",
      "# --- 2. Activate ---",
      "source .venv/bin/activate",
      "# --- 3. Sync Dependencies (Prod + Dev) ---",
      "pip install -q -r requirements.txt",
      "pip install -q -r requirements-dev.txt",
      "# --- 4. Subprocess Coverage Setup ---",
      "echo 'import coverage; coverage.process_startup()' > .venv/lib/python3.11/site-packages/sitecustomize.py"
    ],
    "scripts": {
      "test": [
        "pytest"
      ]
    }
  }
}